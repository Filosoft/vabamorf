# hfst-xfst skript
# kompileerimiseks e. muunduri ana2.hfst tegemiseks tee nii:
# echo 'save stack ana2.hfst' | hfst-xfst -l tee_ana2.xfscript

# kasutamine: echo 'rootsiitsitaja' | hfst-lookup -b 0 ana2.hfst
# (-b 0 tähendab, et väljundisse läheb ainult üks ja kõige tõenäolisem variant)
# tulemus:    roo_tsiit.si.ta.ja
#

# oletamine viska ära
# ja lõpu- ning liite märk viska ära

read regex @"/home/hkaalep/git-giella/lang-est-x-utee/src/filters/remove-guessed-forms.est.hfst" .o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/analyser-raw-gt-desc.hfst" .o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/filters/remove-infl_deriv-borders.hfst";

# eemalda muunduri leksikaalne pool, s.t. lemmad + kategooriad
# ja jäta alles sõnavormide pool
lower-side net

# nimeta see muundur fst-ks
define fst

define alakriips ["_" <- "#" ] ;

define suva [?+]::1000 ;

# pane muutujad selliseks, et nii diakriitikud kui kaalud jookseksid muunduri-tegemise protsessist ilusti läbi
set flag-is-epsilon ON
set encode-weights ON

# pane kokku silbitaja (mis tuleb korraks ümber keerata), osasõna-piiri teisendaja; 
# ja teiselt poolt suurtähestajad jm kirjapildiga seonduv

read regex @"/home/hkaalep/silbitamine/silbitaja.hfst".i .o. alakriips .o. [[fst .o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/filters/remove-word-boundary.hfst" .o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/orthography/inituppercase.compose.hfst" .o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/orthography/allcaps.compose.hfst".o. @"/home/hkaalep/git-giella/lang-est-x-utee/src/orthography/spellrelax.compose.hfst"] | suva];

invert net







